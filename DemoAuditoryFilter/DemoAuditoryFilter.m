%
%     Demonstrations for introducting auditory filters 
%     Irino, T. 
%     Created:   9 Mar 2010
%     Modified:  9 Mar 2010
%     Modified: 20 Mar 2010
%     Modified: 31 Mar 2010
%     Modified:  7 Apr 2010
%     Modified: 11 Apr 2010 (Unicode for MATLAB 2010a)
%     Modified: 11 Jun 2010 (Figure number?AstrDemo)
%     Modified: 27 Jul 2010 (SwSound, DemoAF_PrintFig)
%     Modified:  3 Sep 2010 (SwEnglish, Note)
%     Modified: 10 Sep 2010 (sound(PlaySnd(:),fs))
%     Modified: 25 May 2015 (sound --> audioplayer+playblocking, MATLAB2013a-)
%     Modified: 25 May 2015 (introduction of SwPrint)
%
%     Note: 
%     ?????f?????A???????????p???????????????????B
%     ????,"?????????????o?t?B???^",???{?????w????, 66??10??, pp.506-512, 2010.
%     ?f???????????A?{?????Q???????????B
%?@?@?@* MATLAB_R2010a?p?????B
%     * Octave????sound??????plot???W???????????X???K?v?????v?????????B
%      ?f??4???????Afminsearch()?????X???K?v???????????B?????Q???@?????????????????B
%     
%     Note2 (2015/5/25)
%      sound()???????A???????????????????????A?g???????????????????????B
%      ???????AMATLAB?????????d?l??????????audioplayer+playblocking?????X?????????B
%      ???X???ADemoAF_CriticalBand.m, DemoAF_NotchedNoise.m?????????B
%      MATLAB2013a???????????m?F?????B
%%
clear

DirWork = '~/tmp/'; % working directory: you may change this.
                    % ?????p??directory?????B
                    % Unix???`?????????????????B
                    % Windows?????????K?X???X?????????B
                    % DirWork = "c:\tmp\" 
                    % ???????????H
%DirWork = [pwd '/']; % ?????????????????A?????????????????????????????????????A
                    % ?}???f?[?^???????????????_??directory???c???????B
                    %
                    %
if exist(DirWork) == 0
  disp('You need to specify the working directory.');
  disp('Example commands in matlab:  >> cd ~; mkdir tmp; ');
  error(['Please look into this file : ' mfilename '.m']);
  % ????error?????????o???????????????A?????p??directory???????????????????B
  % ????????Unix???????Acd ~; mkdir tmp; ?????????A???????????????????B
end;
NameRsltNN = [DirWork 'DemoAF_RsltNN.mat']; 

SwEnglish = 0;  % Japanese    ???{?? (default)
SwEnglish = 1; % English     ?p??

%SwSound = 0;   % No sound playback for?@lecture demonstration?@?????f???p
SwSound = 1;  % playback sound (default)

% SwPrint = 0; % No print. e.g. when there is trouble with MATLAB2015a.
SwPrint = 1;

if SwEnglish == 0,
  strDemo0 = '?f??:';
  strDemo(1) = {'  1) ???o?t?B???^?????b'};
  strDemo(2) = {'  2) ???E??????'};
  strDemo(3) = {'  3) ?m?b?`?G???}?X?L???O?@'};
  strDemo(4) = {'  4) ???o?t?B???^?`??????'};
  strDemoQ = '?f?????????I?? >>';

else    
  strDemo0 ='Demo:';
  strDemo(1) = {'  1) Auditory filter basics'};
  strDemo(2) = {'  2) Critical band'};
  strDemo(3) = {'  3) Notched noise masking'};
  strDemo(4) = {'  4) Estimation of filter shape'};
  strDemoQ ='Select demo number >> ';
end;

disp(strDemo0);
for nd =1:4,
    disp(char(strDemo(nd)));
end;
SwDemo = input(strDemoQ);
if length(SwDemo) == 0, SwDemo = 1; end;
 
disp(' ');
disp(['===  ' strDemo0  char(strDemo(SwDemo)) '  ===']);

%%
switch SwDemo
  case 1,
    close all
    DemoAF_Basics
 
  case 2,
    DemoAF_CriticalBand
   % Responses for ASJ review Fig.4 : 12 8 8 8 9 10 

  case 3,
    DemoAF_NotchedNoise
    % Responses for ASJ review Fig. 6 : 13 5 6 8 10 11 12 
    %%% save the result for filer-shape estimation in case 4
    str = ['save ' NameRsltNN ' ProbeLevel ParamNN ' ];
    eval(str);
 
 case 4,
    %%% load the result of exp. notched noise in case 3
    str = ['load ' NameRsltNN ];
    eval(str);
    DemoAF_ShapeEstimation
           
end;

disp(' ');

