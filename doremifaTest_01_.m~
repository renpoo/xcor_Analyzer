clear;
close all;

A = 1;
%duration = 3.0;
%fs = 44100;
fs = 96000;
duration = 2^19/fs;
%interval = duration;
interval = 0.5;

N = 1;

%f = [ 512, 576, 640, 682.6, 768, 864, 960, 1023 ];

%fMax = [ 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192 16384 ];
fMax = [ 1024 ];

%fMin = [ 1018 ];
fMin = fMax - N/6;

Z = zeros( 2^19, 1 );
S = Z;

for k = N : N,
    for j = 1 : length(fMax),
        
        %{%}
        f = zeros( k + 1, 1 );
        for i = 1 : length(f),
            %f(i) = fMax - length(f) + i;
            %f(i) = fMax(j) - N + i;
            f(i) = ( fMax( j ) - fMin( j ) ) * (i-1) / k + fMin( j );
        end;
        %{%}
        
        %return;
        
        
        %for i = length(f) : -1 : 1,
        for i = length(f) : -1 : 2,
            disp( strcat( 'index# = ', num2str(i), '  :  ', num2str( f(i) ), 'Hz' ) );
            
            %s = makeSineWave_( A, f(i), 0, fs, duration, interval );
            
            %s = generateCombinationalSounds( './_Sounds', strcat('sine', num2str(f(i)), 'Hz_0deg.wav'), strcat('sine', num2str(fMax), 'Hz_0deg.wav') );
            
            %A= 2^4;
            %s = makeNarrowbandNoise_( A, f(i), fMax( j ), fs, duration, interval )';
            s = makeNarrowbandNoise_( A, f(i-1), f(i), fs, duration, interval )';
            s = s / max( abs(s) ) * 1;
            
            S = S + s;
            %S = horzcat( S, s, Z );
            
            
            % --- FFT and Plot
            m = length( s );          % Window length
            n = pow2( nextpow2( m ) );   % Transform length
            y = fft( s, n );           % DFT
            fAxis = ( 0 : (n-1) ) * ( fs / n );      % Frequency range
            power = y .* conj(y) / n;    % Power of the DFT
            
            figure(); plot( fAxis( 1 : floor(n/2) ), power( 1 : floor(n/2) ) );
            axis([950,1050,0,100000]);
            xlabel('Frequency (Hz)');
            ylabel('Power (dB)');
            title( strcat( '{\bf Periodogram} ' ));
            
        end;
        
        
    end;
    
    S = S / max( abs(S) );                
    sound( S, fs ); pause( duration + interval ); disp( '#####' );
end;